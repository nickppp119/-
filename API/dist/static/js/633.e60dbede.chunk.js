"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[633],{8273:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(3768);const s={search:e=>{const t="http://".concat("127.0.0.1",":").concat("443","/api/role/search");fetch(t,{method:"GET"}).then((async t=>{const a=await t.json();t.ok?e(a):n.Ay.error(a.detail)}))}}},7452:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(3768);const s="127.0.0.1",r="443",o={login:(e,t,a,o)=>{const c="http://".concat(s,":").concat(r,"/api/user/login"),l={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e,password:t})};fetch(c,l).then((async e=>{const t=await e.json();e.ok?(a.setValue(t.detail),o("/")):n.Ay.error(t.detail)}))},create:(e,t,a,o)=>{const c="http://".concat(s,":").concat(r,"/api/user/create"),l={method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e,password:t,role:a})};fetch(c,l).then((async e=>{const t=await e.json();e.ok?n.Ay.success(t.detail):n.Ay.error(t.detail)}))},remove:(e,t)=>{const a="http://".concat(s,":").concat(r,"/api/user/remove"),o={method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e})};fetch(a,o).then((async e=>{const t=await e.json();e.ok?n.Ay.success(t.detail):n.Ay.error(t.detail)}))},update:(e,t,a,o)=>{const c="http://".concat(s,":").concat(r,"/api/user/update"),l={method:"PUT",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e,password:t,role:a})};fetch(c,l).then((async e=>{const t=await e.json();e.ok?n.Ay.success(t.detail):n.Ay.error(t.detail)}))},search:(e,t,a)=>{const o="http://".concat(s,":").concat(r,"/api/user/search"),c={method:"GET",headers:{Authorization:"Bearer ".concat(a)}};fetch(o,c).then((async a=>{const s=await a.json();if(a.ok){const a=s.filter((e=>e.username!==t));e(a)}else n.Ay.error(s.detail)}))}}},2292:(e,t,a)=>{a.d(t,{H1:()=>l,H3:()=>i});var n=a(8387),s=a(6446),r=a(4535),o=(a(5043),a(579));const c=(0,r.Ay)(s.A)((e=>{let{texttransformstyle:t,ellipsis:a}=e;return{textTransform:t||"none",whiteSpace:a?"nowrap":"normal",overflow:a?"hidden":"",textOverflow:a?"ellipsis":""}})),l=e=>{let{children:t,className:a,ellipsis:s,textTransform:r,...l}=e;return(0,o.jsx)(c,{texttransformstyle:r,ellipsis:s,className:(0,n.A)({[a||""]:!0}),component:"h1",mb:0,mt:0,fontSize:"28px",fontWeight:"600",lineHeight:"1.5",...l,children:t})},i=e=>{let{children:t,className:a,ellipsis:s,textTransform:r,...l}=e;return(0,o.jsx)(c,{texttransformstyle:r,ellipsis:s,className:(0,n.A)({[a||""]:!0}),component:"h3",mb:0,mt:0,fontSize:"18px",fontWeight:"600",lineHeight:"1.5",...l,children:t})}},2014:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(5043),s=a(6446),r=a(9252),o=a(8911),c=a(8982),l=a(1906),i=a(9190),h=a(7784),d=a(6607),u=a(3193),m=a(5187),p=a(2292),f=a(7452),w=a(8273),x=a(579);const A=()=>{const{userState:e}=(0,m.Z)(),[t,a]=(0,n.useState)(e.value.role<2?e.value.username:""),[A,y]=(0,n.useState)([]),[v,j]=(0,n.useState)(e.value.role<2?"\u6559\u5e2b":""),[g,b]=(0,n.useState)([]);return(0,n.useEffect)((()=>{f.A.search(y,e.value.username,e.value.token),w.A.search(b)}),[e.value.token,e.value.username]),(0,x.jsx)(r.A,{fixed:!0,sx:{width:"100%",height:"100%"},children:(0,x.jsx)(s.A,{component:"form",onSubmit:a=>{a.preventDefault();const n=new FormData(a.currentTarget).get("password");if(t&&n&&v){const a="\u6559\u5e2b"===v||"\u770b\u8b77"===v?1:2;f.A.update(t,n,a,e.value.token)}},noValidate:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:(0,x.jsxs)(o.A,{spacing:2,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,x.jsx)(p.H1,{children:"\u7de8\u8f2f\u4f7f\u7528\u8005"}),e.value.role<2?(0,x.jsx)(h.A,{label:"\u5e33\u865f",variant:"outlined",value:t,disabled:!0}):(0,x.jsxs)(u.A,{fullWidth:!0,children:[(0,x.jsx)(i.A,{children:"\u5e33\u865f"}),(0,x.jsx)(c.A,{value:t,label:"\u5e33\u865f",onChange:e=>a(e.target.value),children:0===A.length?(0,x.jsx)(d.A,{value:null,children:"None"},"user-0"):A.map(((e,t)=>(0,x.jsx)(d.A,{value:e.username,children:e.username},"user-".concat(t))))})]}),(0,x.jsx)(h.A,{id:"password",name:"password",label:"\u5bc6\u78bc",variant:"outlined"}),e.value.role<2?(0,x.jsx)(x.Fragment,{}):(0,x.jsxs)(u.A,{fullWidth:!0,children:[(0,x.jsx)(i.A,{children:"\u8eab\u4efd\u5225"}),(0,x.jsx)(c.A,{value:v,label:"\u8eab\u4efd\u5225",onChange:e=>j(e.target.value),children:0===g.length?(0,x.jsx)(d.A,{value:null,children:"None"},"role-0"):g.map(((e,t)=>(0,x.jsx)(d.A,{value:e.name,children:e.name},"role-".concat(t))))})]}),(0,x.jsx)(l.A,{type:"submit",variant:"outlined",size:"large",children:"\u9001\u51fa"})]})})})}}}]);
//# sourceMappingURL=633.e60dbede.chunk.js.map